<launch>

	<!-- Config file argument for rviz -->
	<arg name="rviz_config" default="" />
	
	<!-- Create an argument to determine whether to use a XACRO or URDF file. -->
	<arg name="use_xacro" default="false" />

	<!-- Argument to determine to use robot_state_publisher, added for lab 3 -->
	<arg name="use_robot_state_publisher" default="true"/>
	
	<!-- argument to use sim time or rosbag playback time -->
	<arg name="use_sim_time" default="true"/>	

	<!-- The filename can be passed into the launch file to override the default. -->
	<arg if="$(arg use_xacro)" name="filename" default="lab2nav.xacro" />
	<arg unless="$(arg use_xacro)" name="filename" default="urdf_from_xacro.urdf" />

	<!-- The full path of the URDF/XACRO file can be passed into the launch file
	instead.  -->
	<arg name="file" default="$(find navvis_description)/urdf/$(arg filename)" />

	<!-- Use the file argument as the name of the file used to set the
	/robot_description parameter on the parameter server -->
	<param if="$(arg use_xacro)" name="robot_description" command="$(find xacro)/xacro --inorder $(arg file)" />
	<param unless="$(arg use_xacro)" name="robot_description" textfile="$(arg file)" />
	<param if="$(arg use_sim_time)" name="use_sim_time" value="true"/>
	<param unless="$(arg use_sim_time)" name="use_sim_time" value="false"/>

	<!-- Run the robot_state_publisher. -->
	<!-- Checks for arg use_robot_state_publisher in lab 3. -->
	<node if="$(arg use_robot_state_publisher)" pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher" />

	<!-- Run RVIZ with a configuration file.  If RVIZ is closed, close everything. -->
	<node pkg="rviz" type="rviz" name="rviz" args="-d $(arg rviz_config)" required="true" />

	<!-- Rosrun static_transform_publisher nodes -->
	<node unless="$(arg use_robot_state_publisher)" pkg="tf2_ros" type="static_transform_publisher" name="left_wheel_pub" args = "0.0 0.365 0.2 -1.57 0.0 0.0 base left_wheel_joint"/>
	<node unless="$(arg use_robot_state_publisher)" pkg="tf2_ros" type="static_transform_publisher" name="right_wheel_pub" args = "0.0 -0.365 0.2 -1.57 0.0 0.0 base right_wheel_joint"/>
	<node unless="$(arg use_robot_state_publisher)" pkg="tf2_ros" type="static_transform_publisher" name="center_wheel_pub" args = "0.0 -0.365 0.2 -1.57 0.0 0.0 base center_wheel_joint"/>

</launch>

